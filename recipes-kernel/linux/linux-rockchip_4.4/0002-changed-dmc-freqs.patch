From e65cde014ff1ff78424718fb43f1cc632b96a3b9 Mon Sep 17 00:00:00 2001
From: Matthias Gorzellik <matthias.gorzellik@gmail.com>
Date: Sun, 12 Jan 2020 18:59:16 +0100
Subject: [PATCH 2/2] changed dmc freqs

---
 .../boot/dts/rockchip/rk3399-rockpro64.dts    | 54 +++++++++++++++----
 1 file changed, 45 insertions(+), 9 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dts b/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dts
index fb9e176e5453..60b1932a714a 100644
--- a/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dts
+++ b/arch/arm64/boot/dts/rockchip/rk3399-rockpro64.dts
@@ -413,16 +413,16 @@
 	downdifferential = <20>;
 	system-status-freq = <
 		/*system status         freq(KHz)*/
-		SYS_STATUS_NORMAL       933000
+		SYS_STATUS_NORMAL       800000
 		SYS_STATUS_REBOOT       400000
 		SYS_STATUS_SUSPEND      400000
-		SYS_STATUS_VIDEO_1080P  933000
-		SYS_STATUS_VIDEO_4K     933000
-		SYS_STATUS_VIDEO_4K_10B 933000
-		SYS_STATUS_PERFORMANCE  933000
+		SYS_STATUS_VIDEO_1080P  800000
+		SYS_STATUS_VIDEO_4K     800000
+		SYS_STATUS_VIDEO_4K_10B 800000
+		SYS_STATUS_PERFORMANCE  800000
 		SYS_STATUS_BOOST        400000
-		SYS_STATUS_DUALVIEW     933000
-		SYS_STATUS_ISP          933000
+		SYS_STATUS_DUALVIEW     800000
+		SYS_STATUS_ISP          800000
 	>;
 	vop-bw-dmc-freq = <
 	/* min_bw(MB/s) max_bw(MB/s) freq(KHz) */
@@ -430,13 +430,49 @@
 		578     1701     300000
 		1702    99999    400000
 	>;
-	auto-min-freq = <800000>;
+	auto-min-freq = <400000>;
+	auto-freq-en = <0>;
 };
 
 &dmc_opp_table {
+	compatible = "operating-points-v2";
+
+	opp-200000000 {
+		opp-hz = /bits/ 64 <200000000>;
+		opp-microvolt = <900000>;
+		status = "disabled";
+	};
+	opp-300000000 {
+		opp-hz = /bits/ 64 <300000000>;
+		opp-microvolt = <900000>;
+		status = "disabled";
+	};
+	opp-400000000 {
+		opp-hz = /bits/ 64 <400000000>;
+		opp-microvolt = <900000>;
+	};
+	opp-528000000 {
+		opp-hz = /bits/ 64 <528000000>;
+		opp-microvolt = <900000>;
+		status = "disabled";
+	};
+	opp-600000000 {
+		opp-hz = /bits/ 64 <600000000>;
+		opp-microvolt = <900000>;
+		status = "disabled";
+	};
+	opp-800000000 {
+		opp-hz = /bits/ 64 <800000000>;
+		opp-microvolt = <900000>;
+	};
 	opp-928000000 {
 		opp-hz = /bits/ 64 <928000000>;
-		opp-microvolt = <925000>;
+		opp-microvolt = <900000>;
+		status = "disabled";
+	};
+	opp-1056000000 {
+		opp-hz = /bits/ 64 <1056000000>;
+		opp-microvolt = <900000>;
 		status = "disabled";
 	};
 };
-- 
2.24.1

